{"contracts":{"SimpleDAO.sol":{"SimpleDAO":{"evm":{"deployedBytecode":{"object":"6080604052600436106100425760003560e01c8062362a95146100485780632e1a7d4d1461008d57806359f1286d146100ca578063d5d44d801461013157610042565b60006000fd5b61008b6004803603602081101561005f5760006000fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610198565b005b34801561009a5760006000fd5b506100c8600480360360208110156100b25760006000fd5b81019080803590602001909291905050506101f0565b005b3480156100d75760006000fd5b5061011b600480360360208110156100ef5760006000fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610303565b6040518082815260200191505060405180910390f35b34801561013e5760006000fd5b50610182600480360360208110156101565760006000fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610357565b6040518082815260200191505060405180910390f35b34600060005060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282825054019250508190909055505b50565b80600060005060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050541015156102ff5760003373ffffffffffffffffffffffffffffffffffffffff1682604051808050600001905060006040518083038185875af1925050503d80600081146102a0576040519150601f19603f3d011682016040523d82523d6000602084013e6102a5565b606091505b5050905081600060005060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505403925050819090905550505b5b50565b6000600060005060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050549050610352565b919050565b6000600050602052806000526040600020600091509050548156fea26469706673582212202f05d575d1f10cd10ddd7aa86ea332ca8afe2c16e5536edba4ada3802c570e2c64736f6c63430007060033","sourceMap":"273:454:0:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;340:77;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;421:213;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;638:87;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;296:39;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;340:77;403:9;389:6;;;:10;396:2;389:10;;;;;;;;;;;;;;;;:23;;;;;;;;;;;;;;;340:77;;:::o;421:213::-;490:6;469;;;:18;476:10;469:18;;;;;;;;;;;;;;;;;;:27;;465:165;;;542:8;555:10;:15;;578:6;555:34;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;541:48;;;617:6;597;;;:18;604:10;597:18;;;;;;;;;;;;;;;;:26;;;;;;;;;;;;;;;465:165;;421:213;;:::o;638:87::-;692:4;710:6;;;:10;717:2;710:10;;;;;;;;;;;;;;;;;;703:17;;;;638:87;;;;:::o;296:39::-;;;;;;;;;;;;;;;;;;;:::o"}},"metadata":"{\"compiler\":{\"version\":\"0.7.6+commit.7338295f\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"credit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"}],\"name\":\"donate\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"}],\"name\":\"queryCredit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"SimpleDAO.sol\":\"SimpleDAO\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"details\":{\"constantOptimizer\":false,\"cse\":false,\"deduplicate\":false,\"jumpdestRemover\":false,\"orderLiterals\":false,\"peephole\":false,\"yul\":false},\"runs\":200},\"remappings\":[]},\"sources\":{\"SimpleDAO.sol\":{\"content\":\"/*\\n * @source: http://blockchain.unica.it/projects/ethereum-survey/attacks.html#simpledao\\n * Upgraded from Solidity 0.4 to 0.7, vulnerability may no longer exist\\n * @author: -\\n * @vulnerable_at_lines: 21\\n */\\n\\n// SPDX-License-Identifier: UNLICENSED\\npragma solidity ^0.7.0;\\n\\ncontract SimpleDAO {\\n  mapping (address => uint) public credit;\\n\\n  function donate(address to) public payable {\\n    credit[to] += msg.value;\\n  }\\n\\n  function withdraw(uint amount) public {\\n    if (credit[msg.sender]>= amount) {\\n      // <yes> <report> REENTRANCY\\n      (bool res,) = msg.sender.call{value: amount}(\\\"\\\");\\n      credit[msg.sender]-=amount;\\n    }\\n  }\\n\\n  function queryCredit(address to) public view returns (uint){\\n    return credit[to];\\n  }\\n}\\n\",\"keccak256\":\"0xa89523cc08618c6c4ae3c8d785f9f3119479bd6440a656b01071aaa772a46572\",\"license\":\"UNLICENSED\"}},\"version\":1}"}}},"errors":[{"component":"general","errorCode":"2072","formattedMessage":"SimpleDAO.sol:21:8: Warning: Unused local variable.\n      (bool res,) = msg.sender.call{value: amount}(\"\");\n       ^------^\n","message":"Unused local variable.","severity":"warning","sourceLocation":{"end":550,"file":"SimpleDAO.sol","start":542},"type":"Warning"}],"sources":{"SimpleDAO.sol":{"id":0}}}

